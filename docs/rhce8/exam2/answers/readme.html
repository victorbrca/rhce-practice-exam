<!doctype html><html><head><title>README</title><base href="../../../"><meta id="root-path" root-path="../../../"><link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1,maximum-scale=5"><meta charset="UTF-8"><link rel="stylesheet" href="lib/styles/obsidian-styles.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="stylesheet" href="lib/styles/plugin-styles.css"><link rel="stylesheet" href="lib/styles/snippets.css"><link rel="stylesheet" href="lib/styles/generated-styles.css"><style></style><script src="lib/scripts/webpage.js"></script><script src="lib/scripts/generated.js"></script></head><body class="mod-linux theme-light code-styler code-styler-style-inline code-styler-gutter-highlight sidebars-always-collapsible loading"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="tree-container file-tree mod-nav-indicator" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">rhce-practice-exam</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">rhce8</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">exam1</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="rhce8/exam1/readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">exam2</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">answers</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="rhce8/exam2/answers/readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="rhce8/exam2/readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">exam3</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">answers</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="rhce8/exam3/answers/readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="rhce8/exam3/readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="rhce8/readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="exam-information.html"><span class="tree-item-title">exam-information</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="readme.html"><span class="tree-item-title">README</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="study-resources.html"><span class="tree-item-title">study-resources</span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings" style="tab-size:2" tabindex="-1"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="min-height:6296px"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div><div class="mod-header"></div><div class="heading-wrapper"><h1 data-heading="Exam Scenario 2 Answers" class="heading" id="Exam_Scenario_2_Answers"><div class="heading-before"></div>Exam Scenario 2 Answers<div class="heading-after">...</div></h1><div class="heading-children"><div><p>Below are the answers for Exam Scenario 2. You can also find all the files that would need to be created for this scenario on this folder.</p></div><div class="heading-wrapper"><h2 data-heading="Task 1" class="heading" id="Task_1"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 1<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Install Ansible" class="heading" id="Install_Ansible"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Install Ansible<div class="heading-after">...</div></h3><div class="heading-children"><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">useradd</span> ansible</div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">su</span> - ansible</div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">mkdir</span> exam-files</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><pre><code>$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/home/ansible/.ssh/id_rsa): id_rsa
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in id_rsa.
Your public key has been saved in id_rsa.pub.
The key fingerprint is:
SHA256:rI3irvdNYBw1mUz/heLTAVloIiPfoR1KzJMwU/IC2N4 ansible@rhel8.localdomain
The key's randomart image is:
+---[RSA 3072]----+
| o. ==.++o.+.    |
|. ...=O.Bo+. .   |
| . ..+oO =o o .  |
|  . Eo+oo. + o   |
|      + S o o    |
|     . =   .     |
|    . o o        |
|   ... o         |
|  .+o.. .        |
+----[SHA256]-----+
</code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">mkdir</span> <span class="token punctuation">{</span>roles,vars,playbooks,scripts,files<span class="token punctuation">}</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>inventory</code></p></div><div class="code-styler-pre-parent"><pre class="language-ini code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/e2a56348-472d-48c0-ab6b-aa1cb4123fb8"></div><div class="code-styler-header-language-tag">Ini</div><div class="code-styler-header-text"></div></div><code class="language-ini is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">node1</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">node2</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">node3</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">node4</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>ansible.cfg</code></p></div><div class="code-styler-pre-parent"><pre class="language-ini code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/e2a56348-472d-48c0-ab6b-aa1cb4123fb8"></div><div class="code-styler-header-language-tag">Ini</div><div class="code-styler-header-text"></div></div><code class="language-ini is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">defaults</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token key attr-name">inventory</span> 		<span class="token punctuation">=</span> <span class="token value attr-value">./inventory</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token key attr-name">roles_path</span> 		<span class="token punctuation">=</span> <span class="token value attr-value">./roles</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token key attr-name">remote_user</span>		<span class="token punctuation">=</span> <span class="token value attr-value">ansible</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token key attr-name">private_key_file</span> 	<span class="token punctuation">=</span> <span class="token value attr-value">./id_rsa</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token key attr-name">host_key_checking</span> 	<span class="token punctuation">=</span> <span class="token value attr-value">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token key attr-name">nocows</span> 			<span class="token punctuation">=</span> <span class="token value attr-value">1</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token key attr-name">retry_files_enabled</span> 	<span class="token punctuation">=</span> <span class="token value attr-value">false</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">useradd</span> ansible</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token function">passwd</span> ansible</div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">visudo -f /etc/sudoers.d/ansible</div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-sudoers code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Sudoers</div><div class="code-styler-header-text"></div></div><code class="language-sudoers is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">ansible 	ALL=(ALL)	NOPASSWD: ALL</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><pre><code># su - ansible

$ sudo -ln
Matching Defaults entries for ansible on node2:
    !visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin, env_reset,
    env_keep="COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS", env_keep+="MAIL PS1 PS2 QTDIR USERNAME
    LANG LC_ADDRESS LC_CTYPE", env_keep+="LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES",
    env_keep+="LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE", env_keep+="LC_TIME LC_ALL LANGUAGE
    LINGUAS _XKB_CHARSET XAUTHORITY", secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin

User ansible may run the following commands on node2:
    (ALL) NOPASSWD: ALL
</code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token punctuation">;</span> <span class="token keyword">do</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">  sshpass -p ansible ssh-copy-id -i ./id_rsa.pub ansible@node<span class="token variable">${i}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token keyword">done</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token function">ssh</span> ansible@node1 -i id_rsa</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p>Add to <code>/etc/ssh/sshd_config</code></p></div><div class="code-styler-pre-parent"><pre class="language-config code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Config</div><div class="code-styler-header-text"></div></div><code class="language-config is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">Match User ansible</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">	PasswordAuthentication no</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>scripts/check-connection.sh</code></p></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token shebang important">#!/bin/bash</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">ansible all -m <span class="token function">ping</span></div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 2" class="heading" id="Task_2"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 2<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Script: get-server-info.sh" class="heading" id="Script:_get-server-info.sh"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Script: get-server-info.sh<div class="heading-after">...</div></h3><div class="heading-children"><div><p><code>scripts/get-server-info.sh</code></p></div><div class="code-styler-pre-parent"><pre class="code-styler-pre" defaultfold="false"><div class="code-styler-header-container-hidden"></div><code><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">#!/bin/bash</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">tuned_profile="$(tuned-adm active | grep 'Current active profile')"</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">if [ ! "$tuned_profile" ] ; then</div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">  tuned_status="inactive"</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">  tuned_profile=" disabled"</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">else</div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">  tuned_status="active"</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">  tuned_profile="$(echo "$tuned_profile" | awk -F':' '{print $2}')"</div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">fi</div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">echo "Hostname: $(hostname)</div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">Name: $(grep -E '^NAME=' /etc/os-release | awk -F"=" '{print $2}')</div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">Version: $(grep -E '^VERSION=' /etc/os-release | awk -F"=" '{print $2}')</div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">Tuned status: $tuned_status</div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">Current active profile:${tuned_profile}"</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Script: task2.sh" class="heading" id="Script:_task2.sh"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Script: task2.sh<div class="heading-after">...</div></h3><div class="heading-children"><div><p><code>scripts/task2.sh</code></p></div><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token shebang important">#!/bin/bash</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">ansible all -m copy -a <span class="token string">'src=/home/ansible/exam-files/scripts/get-server-info.sh dest=/usr/local/bin/get-server-info.sh mode=0755 owner=root group=root'</span> -b</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">ansible all -a <span class="token string">'/usr/local/bin/get-server-info.sh'</span> -b</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 3" class="heading" id="Task_3"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 3<div class="heading-after">...</div></h2><div class="heading-children"><div class="code-styler-pre-parent"><pre class="language-ini code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/e2a56348-472d-48c0-ab6b-aa1cb4123fb8"></div><div class="code-styler-header-language-tag">Ini</div><div class="code-styler-header-text"></div></div><code class="language-ini is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">webservers</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">node1</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">node2</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">databases</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">node3</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">node4</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">node3</div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">postgresql</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">node4</div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">version1</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">node1</div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">version2</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">node2</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 4" class="heading" id="Task_4"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 4<div class="heading-after">...</div></h2><div class="heading-children"><div><p><code>playbooks/task4.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> all</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">  <span class="token key atrule">become</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">tasks</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates /data/backup</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">      <span class="token key atrule">file</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">        <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/backup</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">        <span class="token key atrule">state</span><span class="token punctuation">:</span> directory</div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">        <span class="token key atrule">mode</span><span class="token punctuation">:</span> g+x<span class="token punctuation">,</span>o+x</div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"webservers" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create /etc/server_role</div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">      <span class="token key atrule">copy</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">        <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/server_role</div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">        <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">"{{ group_names | string | regex_search('webservers|databases')}}"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cheks if httpd is installed</div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">      <span class="token key atrule">command</span><span class="token punctuation">:</span> rpm <span class="token punctuation">-</span>qa <span class="token punctuation">|</span> grep <span class="token punctuation">-</span>qE '^httpd<span class="token punctuation">-</span><span class="token punctuation">[</span>0<span class="token punctuation">-</span><span class="token number">9</span><span class="token punctuation">]</span>'</div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">      <span class="token key atrule">args</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">        <span class="token key atrule">warn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">      <span class="token key atrule">register</span><span class="token punctuation">:</span> httpd_install_status</div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">      <span class="token key atrule">changed_when</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"webservers" in group_names or "databases" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Shows httpd package as installed</div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">      <span class="token key atrule">debug</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">        <span class="token key atrule">msg</span><span class="token punctuation">:</span> <span class="token string">"HTTPD is installed"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text">        <span class="token punctuation">-</span> 'httpd_install_status.rc == 0 and</div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text">          ("webservers" in group_names or "databases" in group_names)'</div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Shows httpd package as not installed</div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text">      <span class="token key atrule">debug</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">36</div><div class="code-styler-line-text">        <span class="token key atrule">msg</span><span class="token punctuation">:</span> <span class="token string">"HTTPD is not installed"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">37</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">38</div><div class="code-styler-line-text">        <span class="token punctuation">-</span> 'httpd_install_status.rc <span class="token tag">!=</span> 0 and</div></div><div class="code-styler-line"><div class="code-styler-line-number">39</div><div class="code-styler-line-text">          ("webservers" in group_names or "databases" in group_names)'</div></div><div class="code-styler-line"><div class="code-styler-line-number">40</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">41</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Makes sure default target is multi<span class="token punctuation">-</span>user.target</div></div><div class="code-styler-line"><div class="code-styler-line-number">42</div><div class="code-styler-line-text">      <span class="token key atrule">shell</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">43</div><div class="code-styler-line-text"><span class="token scalar string">          if ! systemctl get-default | grep -q multi-user.target ; then</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">44</div><div class="code-styler-line-text"><span class="token scalar string">            systemctl set-default multi-user.target</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">45</div><div class="code-styler-line-text"><span class="token scalar string">            /bin/false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">46</div><div class="code-styler-line-text"><span class="token scalar string">          else</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">47</div><div class="code-styler-line-text"><span class="token scalar string">            exit 0</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">48</div><div class="code-styler-line-text"><span class="token scalar string">          fi</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">49</div><div class="code-styler-line-text">      <span class="token key atrule">register</span><span class="token punctuation">:</span> targetlevel_output</div></div><div class="code-styler-line"><div class="code-styler-line-number">50</div><div class="code-styler-line-text">      <span class="token key atrule">changed_when</span><span class="token punctuation">:</span> targetlevel_output.rc == 1</div></div><div class="code-styler-line"><div class="code-styler-line-number">51</div><div class="code-styler-line-text">      <span class="token key atrule">ignore_errors</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">52</div><div class="code-styler-line-text"><br></div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 5" class="heading" id="Task_5"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 5<div class="heading-after">...</div></h2><div class="heading-children"><div><p><code>playbooks/task5.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> all</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">  <span class="token key atrule">become</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">handlers</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restat HTTPD</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">      <span class="token key atrule">systemd</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">        <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd</div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">        <span class="token key atrule">state</span><span class="token punctuation">:</span> restarted</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">      <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token string">"Restart HTTPD"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"webservers" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Backup httpd.conf</div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">      <span class="token key atrule">archive</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">        <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/httpd/conf/httpd.conf</div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">        <span class="token key atrule">dest</span><span class="token punctuation">:</span> <span class="token string">"/data/backup/http.conf-{{ ansible_date_time.date | replace('-', '') }}_{{ ansible_date_time.time | replace(':', '') }}.zip"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">        <span class="token key atrule">format</span><span class="token punctuation">:</span> zip</div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">      <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token string">"Backup httpd.conf"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"webservers" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">  <span class="token key atrule">tasks</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Uploads root_space_check.sh</div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">      <span class="token key atrule">copy</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">        <span class="token key atrule">src</span><span class="token punctuation">:</span> /home/ansible/exam<span class="token punctuation">-</span>files/files/root_space_check.sh</div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">        <span class="token key atrule">dest</span><span class="token punctuation">:</span> /usr/local/bin/root_space_check.sh</div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">        <span class="token key atrule">mode</span><span class="token punctuation">:</span> ugo+x</div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Adds root_space_check.sh to con</div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">      <span class="token key atrule">cron</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text">        <span class="token key atrule">name</span><span class="token punctuation">:</span> Runs root_space_check.sh every hour</div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text">        <span class="token key atrule">special_time</span><span class="token punctuation">:</span> hourly</div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text">        <span class="token key atrule">job</span><span class="token punctuation">:</span> /usr/local/bin/root_space_check.sh</div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text">    <span class="token comment"># Block starts</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">36</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Block for webservers</div></div><div class="code-styler-line"><div class="code-styler-line-number">37</div><div class="code-styler-line-text">      <span class="token key atrule">block</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">38</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">39</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Installs httpd</div></div><div class="code-styler-line"><div class="code-styler-line-number">40</div><div class="code-styler-line-text">        <span class="token key atrule">dnf</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">41</div><div class="code-styler-line-text">          <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd</div></div><div class="code-styler-line"><div class="code-styler-line-number">42</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">43</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Enables the httpd service</div></div><div class="code-styler-line"><div class="code-styler-line-number">44</div><div class="code-styler-line-text">        <span class="token key atrule">systemd</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">45</div><div class="code-styler-line-text">          <span class="token key atrule">name</span><span class="token punctuation">:</span> httpd</div></div><div class="code-styler-line"><div class="code-styler-line-number">46</div><div class="code-styler-line-text">          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> yes</div></div><div class="code-styler-line"><div class="code-styler-line-number">47</div><div class="code-styler-line-text">          <span class="token key atrule">state</span><span class="token punctuation">:</span> started</div></div><div class="code-styler-line"><div class="code-styler-line-number">48</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">49</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Opens ports for httpd</div></div><div class="code-styler-line"><div class="code-styler-line-number">50</div><div class="code-styler-line-text">        <span class="token key atrule">firewalld</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">51</div><div class="code-styler-line-text">          <span class="token key atrule">service</span><span class="token punctuation">:</span> <span class="token string">"{{ item }}"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">52</div><div class="code-styler-line-text">          <span class="token key atrule">permanent</span><span class="token punctuation">:</span> yes</div></div><div class="code-styler-line"><div class="code-styler-line-number">53</div><div class="code-styler-line-text">          <span class="token key atrule">state</span><span class="token punctuation">:</span> enabled</div></div><div class="code-styler-line"><div class="code-styler-line-number">54</div><div class="code-styler-line-text">        <span class="token key atrule">loop</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">55</div><div class="code-styler-line-text">          <span class="token punctuation">-</span> http</div></div><div class="code-styler-line"><div class="code-styler-line-number">56</div><div class="code-styler-line-text">          <span class="token punctuation">-</span> https</div></div><div class="code-styler-line"><div class="code-styler-line-number">57</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">58</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Changes the Listen option in /etc/httpd/conf/httpd.conf</div></div><div class="code-styler-line"><div class="code-styler-line-number">59</div><div class="code-styler-line-text">        <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">60</div><div class="code-styler-line-text">          <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/httpd/conf/httpd.conf</div></div><div class="code-styler-line"><div class="code-styler-line-number">61</div><div class="code-styler-line-text">          <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">"Listen {{ ansible_eth1.ipv4.address }}:80"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">62</div><div class="code-styler-line-text">          <span class="token key atrule">regexp</span><span class="token punctuation">:</span> <span class="token string">"^Listen .*"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">63</div><div class="code-styler-line-text">        <span class="token key atrule">notify</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">64</div><div class="code-styler-line-text">          <span class="token punctuation">-</span> <span class="token string">"Restart HTTPD"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">65</div><div class="code-styler-line-text">          <span class="token punctuation">-</span> <span class="token string">"Backup httpd.conf"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">66</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">67</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"webservers" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">68</div><div class="code-styler-line-text">    <span class="token comment"># Block end</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">69</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">70</div><div class="code-styler-line-text">    <span class="token comment"># Block starts</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">71</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Start block for databases</div></div><div class="code-styler-line"><div class="code-styler-line-number">72</div><div class="code-styler-line-text">      <span class="token key atrule">block</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">73</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">74</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates PV and VG</div></div><div class="code-styler-line"><div class="code-styler-line-number">75</div><div class="code-styler-line-text">        <span class="token key atrule">lvg</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">76</div><div class="code-styler-line-text">          <span class="token key atrule">vg</span><span class="token punctuation">:</span> databases_vg</div></div><div class="code-styler-line"><div class="code-styler-line-number">77</div><div class="code-styler-line-text">          <span class="token key atrule">pvs</span><span class="token punctuation">:</span> /dev/sdb</div></div><div class="code-styler-line"><div class="code-styler-line-number">78</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">79</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create LV</div></div><div class="code-styler-line"><div class="code-styler-line-number">80</div><div class="code-styler-line-text">        <span class="token key atrule">lvol</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">81</div><div class="code-styler-line-text">          <span class="token key atrule">vg</span><span class="token punctuation">:</span> databases_vg</div></div><div class="code-styler-line"><div class="code-styler-line-number">82</div><div class="code-styler-line-text">          <span class="token key atrule">lv</span><span class="token punctuation">:</span> databases_lv</div></div><div class="code-styler-line"><div class="code-styler-line-number">83</div><div class="code-styler-line-text">          <span class="token key atrule">size</span><span class="token punctuation">:</span> 100%FREE</div></div><div class="code-styler-line"><div class="code-styler-line-number">84</div><div class="code-styler-line-text">          <span class="token key atrule">shrink</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">85</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">86</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Formats to ext4</div></div><div class="code-styler-line"><div class="code-styler-line-number">87</div><div class="code-styler-line-text">        <span class="token key atrule">filesystem</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">88</div><div class="code-styler-line-text">          <span class="token key atrule">fstype</span><span class="token punctuation">:</span> ext4</div></div><div class="code-styler-line"><div class="code-styler-line-number">89</div><div class="code-styler-line-text">          <span class="token key atrule">dev</span><span class="token punctuation">:</span> /dev/mapper/databases_vg<span class="token punctuation">-</span>databases_lv</div></div><div class="code-styler-line"><div class="code-styler-line-number">90</div><div class="code-styler-line-text">          <span class="token key atrule">opts</span><span class="token punctuation">:</span> <span class="token string">'-L DATABASES'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">91</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">92</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create the mountpoint for DATABASES</div></div><div class="code-styler-line"><div class="code-styler-line-number">93</div><div class="code-styler-line-text">        <span class="token key atrule">mount</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">94</div><div class="code-styler-line-text">          <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/databases</div></div><div class="code-styler-line"><div class="code-styler-line-number">95</div><div class="code-styler-line-text">          <span class="token key atrule">src</span><span class="token punctuation">:</span> LABEL=DATABASES</div></div><div class="code-styler-line"><div class="code-styler-line-number">96</div><div class="code-styler-line-text">          <span class="token key atrule">fstype</span><span class="token punctuation">:</span> ext4</div></div><div class="code-styler-line"><div class="code-styler-line-number">97</div><div class="code-styler-line-text">          <span class="token key atrule">state</span><span class="token punctuation">:</span> present</div></div><div class="code-styler-line"><div class="code-styler-line-number">98</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">99</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"mysql" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">100</div><div class="code-styler-line-text">    <span class="token comment"># Block end</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">101</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">102</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Enables SELinux for databases</div></div><div class="code-styler-line"><div class="code-styler-line-number">103</div><div class="code-styler-line-text">      <span class="token key atrule">selinux</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">104</div><div class="code-styler-line-text">        <span class="token key atrule">state</span><span class="token punctuation">:</span> enforcing</div></div><div class="code-styler-line"><div class="code-styler-line-number">105</div><div class="code-styler-line-text">        <span class="token key atrule">policy</span><span class="token punctuation">:</span> targeted</div></div><div class="code-styler-line"><div class="code-styler-line-number">106</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> <span class="token string">'"databases" in group_names'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">107</div><div class="code-styler-line-text"><br></div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 6" class="heading" id="Task_6"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 6<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Role: start-page" class="heading" id="Role:_start-page"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role: start-page<div class="heading-after">...</div></h3><div class="heading-children"><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token builtin class-name">cd</span> roles</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">ansible-galaxy init start-page</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>roles/start-page/templates/index.html.j2</code></p></div><div class="code-styler-pre-parent"><pre class="language-jinja2 code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b6a6b776-9784-4960-b3a0-5351ff6454d3"></div><div class="code-styler-header-language-tag">Django/Jinja2</div><div class="code-styler-header-text"></div></div><code class="language-jinja2 is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Server Information<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">        <span class="token selector">body</span> <span class="token punctuation">{</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">            <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">            <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token unit">px</span><span class="token punctuation">;</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">        <span class="token selector">div</span> <span class="token punctuation">{</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">            <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">        <span class="token punctuation">}</span></span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><span class="token style"><span class="token language-css">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Server Information<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>Hostname:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hostname<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">ansible_fqdn</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>Node Group:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">group_names</span> <span class="token operator">|</span> <span class="token variable">string</span> <span class="token operator">|</span> <span class="token function">regex_search</span><span class="token punctuation">(</span><span class="token string">'version.'</span><span class="token punctuation">)</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>IP Address:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ip<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">ansible_eth1</span><span class="token punctuation">.</span><span class="token variable">ipv4</span><span class="token punctuation">.</span><span class="token variable">address</span>  <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>Timezone:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>timezone<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token jinja2 language-jinja2"><span class="token delimiter punctuation">{{</span> <span class="token variable">ansible_date_time</span><span class="token punctuation">.</span><span class="token variable">tz</span> <span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">36</div><div class="code-styler-line-text"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">37</div><div class="code-styler-line-text"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>roles/start-page/tasks/main.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment"># tasks file for start-page</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Pushes index.html</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">template</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token key atrule">src</span><span class="token punctuation">:</span> index.html.j2</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token key atrule">dest</span><span class="token punctuation">:</span> /var/www/html/index.html</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Role: journald-persistent" class="heading" id="Role:_journald-persistent"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role: journald-persistent<div class="heading-after">...</div></h3><div class="heading-children"><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token builtin class-name">cd</span> roles</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">ansible-galaxy init journald-persistent</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>roles/journald-persistent/tasks/main.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment"># tasks file for journald-persistent</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create /var/log/journal</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">file</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token key atrule">path</span><span class="token punctuation">:</span> /var/log/journal</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> directory</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">    <span class="token key atrule">owner</span><span class="token punctuation">:</span> root</div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">    <span class="token key atrule">group</span><span class="token punctuation">:</span> root</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Configures /etc/systemd/journald.conf</div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">  <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">    <span class="token key atrule">path</span><span class="token punctuation">:</span> /etc/systemd/journald.conf</div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">    <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">"{{ item.line }}"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">    <span class="token key atrule">regexp</span><span class="token punctuation">:</span> <span class="token string">"{{ item.regexp }}"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">  <span class="token key atrule">loop</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">'SystemMaxUse=100M'</span><span class="token punctuation">,</span> <span class="token key atrule">regexp</span><span class="token punctuation">:</span> <span class="token string">'^SystemMaxUse=.*'</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">'Storage=persistent'</span><span class="token punctuation">,</span> <span class="token key atrule">regexp</span><span class="token punctuation">:</span> <span class="token string">'^Storage=.*'</span> <span class="token punctuation">}</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token string">"Restart Journald"</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>roles/journald-persistent/handlers/main.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment"># handlers file for journald-persistent</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restarts</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">systemd</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> systemd<span class="token punctuation">-</span>journald.service</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> restarted</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">  <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token string">"Restart Journald"</span></div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Playbook" class="heading" id="Playbook"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Playbook<div class="heading-after">...</div></h3><div class="heading-children"><div><p><code>playbooks/task6.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-jinja2 code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b6a6b776-9784-4960-b3a0-5351ff6454d3"></div><div class="code-styler-header-language-tag">Django/Jinja2</div><div class="code-styler-header-text"></div></div><code class="language-jinja2 is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">---</div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text">- hosts: all</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">  become: true</div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  roles:</div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    - name: start-page</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">      when: '"webservers" in group_names'</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">    - name: journald-persistent</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 7" class="heading" id="Task_7"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 7<div class="heading-after">...</div></h2><div class="heading-children"><div><p>node1:</p></div><div><pre><code>sudo mkdir -p /etc/ansible/facts.d
</code><button class="copy-code-button">Copy</button></pre></div><div><p><code>/etc/ansible/facts.d/exam.fact</code></p></div><div class="code-styler-pre-parent"><pre class="language-ini code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/e2a56348-472d-48c0-ab6b-aa1cb4123fb8"></div><div class="code-styler-header-language-tag">Ini</div><div class="code-styler-header-text"></div></div><code class="language-ini is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">server_info</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token key attr-name">group</span><span class="token punctuation">=</span><span class="token value attr-value">webservers</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token key attr-name">app_version</span><span class="token punctuation">=</span><span class="token value attr-value">1</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p>node2:</p></div><div><pre><code>sudo mkdir -p /etc/ansible/facts.d
</code><button class="copy-code-button">Copy</button></pre></div><div><p><code>/etc/ansible/facts.d/exam.fact</code></p></div><div class="code-styler-pre-parent"><pre class="language-ini code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/e2a56348-472d-48c0-ab6b-aa1cb4123fb8"></div><div class="code-styler-header-language-tag">Ini</div><div class="code-styler-header-text"></div></div><code class="language-ini is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">server_info</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token key attr-name">group</span><span class="token punctuation">=</span><span class="token value attr-value">webservers</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token key attr-name">app_version</span><span class="token punctuation">=</span><span class="token value attr-value">2</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p>ansible-console</p></div><div><pre><code>ansible@webservers (2)[f:5]$ ls
node1 | CHANGED | rc=0 &gt;&gt;

node2 | CHANGED | rc=0 &gt;&gt;

ansible@webservers (2)[f:5]$ setup

ansible@webservers (2)[f:5]$ debug var=ansible_local
node1 | SUCCESS =&gt; {
    "ansible_local": {
        "exam": {
            "server_info": {
                "app_version": "1",
                "group": "webservers"
            }
        }
    }
}
node2 | SUCCESS =&gt; {
    "ansible_local": {
        "exam": {
            "server_info": {
                "app_version": "2",
                "group": "webservers"
            }
        }
    }
}
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 8" class="heading" id="Task_8"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 8<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Role: postgresql" class="heading" id="Role:_postgresql"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role: postgresql<div class="heading-after">...</div></h3><div class="heading-children"><div><p><code>roles/postgresql/tasks/main.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment"># tasks file for postgresql</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Installs the VDO package</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">dnf</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> vdo</div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">      <span class="token punctuation">-</span> kmod<span class="token punctuation">-</span>kvdo</div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Starts the VDO service</div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">  <span class="token key atrule">systemd</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> vdo.service</div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> started</div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">  <span class="token comment"># The force option in the vdo module is not present on Ansible 2.9</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checks if VDO volume already exists</div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">  <span class="token key atrule">command</span><span class="token punctuation">:</span> vdostats databases_vdo</div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">  <span class="token key atrule">register</span><span class="token punctuation">:</span> vgostats_output</div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">  <span class="token key atrule">changed_when</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">  <span class="token key atrule">ignore_errors</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates the VDO partition</div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">  <span class="token key atrule">vdo</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> databases_vdo</div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">    <span class="token key atrule">device</span><span class="token punctuation">:</span> /dev/sdb</div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text">    <span class="token key atrule">logicalsize</span><span class="token punctuation">:</span> 20G</div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">    <span class="token key atrule">writepolicy</span><span class="token punctuation">:</span> auto</div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">    <span class="token key atrule">deduplication</span><span class="token punctuation">:</span> disabled</div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">    <span class="token comment">#force: false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text">  <span class="token key atrule">when</span><span class="token punctuation">:</span> vgostats_output == 1</div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create the volume group</div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">  <span class="token key atrule">lvg</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text">    <span class="token key atrule">pvs</span><span class="token punctuation">:</span> /dev/mapper/databases_vdo</div></div><div class="code-styler-line"><div class="code-styler-line-number">36</div><div class="code-styler-line-text">    <span class="token key atrule">vg</span><span class="token punctuation">:</span> databases_vg</div></div><div class="code-styler-line"><div class="code-styler-line-number">37</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">38</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create the logical volume</div></div><div class="code-styler-line"><div class="code-styler-line-number">39</div><div class="code-styler-line-text">  <span class="token key atrule">lvol</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">40</div><div class="code-styler-line-text">    <span class="token key atrule">lv</span><span class="token punctuation">:</span> databases_lv</div></div><div class="code-styler-line"><div class="code-styler-line-number">41</div><div class="code-styler-line-text">    <span class="token key atrule">vg</span><span class="token punctuation">:</span> databases_vg</div></div><div class="code-styler-line"><div class="code-styler-line-number">42</div><div class="code-styler-line-text">    <span class="token key atrule">size</span><span class="token punctuation">:</span> 100%FREE</div></div><div class="code-styler-line"><div class="code-styler-line-number">43</div><div class="code-styler-line-text">    <span class="token key atrule">force</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">44</div><div class="code-styler-line-text">    <span class="token key atrule">shrink</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">45</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">46</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates the ext4 filesystem</div></div><div class="code-styler-line"><div class="code-styler-line-number">47</div><div class="code-styler-line-text">  <span class="token key atrule">filesystem</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">48</div><div class="code-styler-line-text">    <span class="token key atrule">dev</span><span class="token punctuation">:</span> /dev/mapper/databases_vg<span class="token punctuation">-</span>databases_lv</div></div><div class="code-styler-line"><div class="code-styler-line-number">49</div><div class="code-styler-line-text">    <span class="token key atrule">fstype</span><span class="token punctuation">:</span> ext4</div></div><div class="code-styler-line"><div class="code-styler-line-number">50</div><div class="code-styler-line-text">    <span class="token key atrule">opts</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>E nodiscard</div></div><div class="code-styler-line"><div class="code-styler-line-number">51</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">52</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Mounts the filesystem</div></div><div class="code-styler-line"><div class="code-styler-line-number">53</div><div class="code-styler-line-text">  <span class="token key atrule">mount</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">54</div><div class="code-styler-line-text">    <span class="token key atrule">fstype</span><span class="token punctuation">:</span> ext4</div></div><div class="code-styler-line"><div class="code-styler-line-number">55</div><div class="code-styler-line-text">    <span class="token key atrule">opts</span><span class="token punctuation">:</span> defaults<span class="token punctuation">,</span>_netdev<span class="token punctuation">,</span>discard<span class="token punctuation">,</span>x<span class="token punctuation">-</span>systemd.requires=vdo.service<span class="token punctuation">,</span>x<span class="token punctuation">-</span>systemd.device<span class="token punctuation">-</span>timeout=0</div></div><div class="code-styler-line"><div class="code-styler-line-number">56</div><div class="code-styler-line-text">    <span class="token key atrule">src</span><span class="token punctuation">:</span> /dev/mapper/databases_vg<span class="token punctuation">-</span>databases_lv</div></div><div class="code-styler-line"><div class="code-styler-line-number">57</div><div class="code-styler-line-text">    <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/databases</div></div><div class="code-styler-line"><div class="code-styler-line-number">58</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> mounted</div></div><div class="code-styler-line"><div class="code-styler-line-number">59</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">60</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Installs the postgresql module</div></div><div class="code-styler-line"><div class="code-styler-line-number">61</div><div class="code-styler-line-text">  <span class="token key atrule">dnf</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">62</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'@postgresql'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">63</div><div class="code-styler-line-text">  <span class="token key atrule">register</span><span class="token punctuation">:</span> postgresql_install</div></div><div class="code-styler-line"><div class="code-styler-line-number">64</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">65</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Configures the data folder for postgresql service</div></div><div class="code-styler-line"><div class="code-styler-line-number">66</div><div class="code-styler-line-text">  <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">67</div><div class="code-styler-line-text">    <span class="token key atrule">path</span><span class="token punctuation">:</span> /usr/lib/systemd/system/postgresql.service</div></div><div class="code-styler-line"><div class="code-styler-line-number">68</div><div class="code-styler-line-text">    <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">'Environment=PGDATA=/data/databases/postgresql_data'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">69</div><div class="code-styler-line-text">    <span class="token key atrule">regexp</span><span class="token punctuation">:</span> <span class="token string">'^Environment=PGDATA=.*'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">70</div><div class="code-styler-line-text">  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token string">"Reload daemon"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">71</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">72</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates /data/databases/postgresql_data</div></div><div class="code-styler-line"><div class="code-styler-line-number">73</div><div class="code-styler-line-text">  <span class="token key atrule">file</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">74</div><div class="code-styler-line-text">    <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/databases/postgresql_data</div></div><div class="code-styler-line"><div class="code-styler-line-number">75</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> directory</div></div><div class="code-styler-line"><div class="code-styler-line-number">76</div><div class="code-styler-line-text">    <span class="token key atrule">owner</span><span class="token punctuation">:</span> postgres</div></div><div class="code-styler-line"><div class="code-styler-line-number">77</div><div class="code-styler-line-text">    <span class="token key atrule">group</span><span class="token punctuation">:</span> postgres</div></div><div class="code-styler-line"><div class="code-styler-line-number">78</div><div class="code-styler-line-text">    <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'0700'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">79</div><div class="code-styler-line-text">  <span class="token key atrule">register</span><span class="token punctuation">:</span> create_postgresql_data</div></div><div class="code-styler-line"><div class="code-styler-line-number">80</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">81</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Initializes the DB</div></div><div class="code-styler-line"><div class="code-styler-line-number">82</div><div class="code-styler-line-text">  <span class="token key atrule">command</span><span class="token punctuation">:</span> postgresql<span class="token punctuation">-</span>setup <span class="token punctuation">-</span><span class="token punctuation">-</span>initdb</div></div><div class="code-styler-line"><div class="code-styler-line-number">83</div><div class="code-styler-line-text">  <span class="token key atrule">args</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">84</div><div class="code-styler-line-text">    <span class="token key atrule">creates</span><span class="token punctuation">:</span> /data/databases/postgresql_data/PG_VERSION</div></div><div class="code-styler-line"><div class="code-styler-line-number">85</div><div class="code-styler-line-text">  <span class="token key atrule">when</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">86</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> postgresql_install.changed == true</div></div><div class="code-styler-line"><div class="code-styler-line-number">87</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> postgresql_data.changed == true</div></div><div class="code-styler-line"><div class="code-styler-line-number">88</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">89</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Installs semanage</div></div><div class="code-styler-line"><div class="code-styler-line-number">90</div><div class="code-styler-line-text">  <span class="token key atrule">dnf</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">91</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> setroubleshoot<span class="token punctuation">-</span>server</div></div><div class="code-styler-line"><div class="code-styler-line-number">92</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">93</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Enables the selinuxuser_postgresql_connect_enabled boolean</div></div><div class="code-styler-line"><div class="code-styler-line-number">94</div><div class="code-styler-line-text">  <span class="token key atrule">seboolean</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">95</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> selinuxuser_postgresql_connect_enabled</div></div><div class="code-styler-line"><div class="code-styler-line-number">96</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> yes</div></div><div class="code-styler-line"><div class="code-styler-line-number">97</div><div class="code-styler-line-text">    <span class="token key atrule">persistent</span><span class="token punctuation">:</span> yes</div></div><div class="code-styler-line"><div class="code-styler-line-number">98</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">99</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Fixes the SELinux context for the postgresql data files</div></div><div class="code-styler-line"><div class="code-styler-line-number">100</div><div class="code-styler-line-text">  <span class="token key atrule">sefcontext</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">101</div><div class="code-styler-line-text">    <span class="token key atrule">target</span><span class="token punctuation">:</span> <span class="token string">'/data/databases(/.*)?'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">102</div><div class="code-styler-line-text">    <span class="token key atrule">setype</span><span class="token punctuation">:</span> postgresql_db_t</div></div><div class="code-styler-line"><div class="code-styler-line-number">103</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> present</div></div><div class="code-styler-line"><div class="code-styler-line-number">104</div><div class="code-styler-line-text">  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token string">"Restore SELinux context"</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>roles/postgresql/handlers/main.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token comment"># handlers file for postgresql</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Reload daemon</div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">systemd</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> postgresql.service</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text">    <span class="token key atrule">daemon_reload</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">  <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token string">"Reload daemon"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restore SELinux context</div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">  <span class="token key atrule">command</span><span class="token punctuation">:</span> restorecon <span class="token punctuation">-</span>irv /data/databases</div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text">  <span class="token key atrule">when</span><span class="token punctuation">:</span> change_selinux_context.changed == true</div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">  <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token string">"Restore SELinux context"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token string">"Restart postgresql service"</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restart postgresql.service</div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">  <span class="token key atrule">systemd</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">    <span class="token key atrule">name</span><span class="token punctuation">:</span> postgresql.service</div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">    <span class="token key atrule">state</span><span class="token punctuation">:</span> restarted</div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">  <span class="token key atrule">listen</span><span class="token punctuation">:</span> <span class="token string">"Restart postgresql service"</span></div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Playbook" class="heading" id="Playbook"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Playbook<div class="heading-after">...</div></h3><div class="heading-children"><div><p><code>playbooks/deploy-postgresql.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> postgresql</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">  <span class="token key atrule">become</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">roles</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> postgresql</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">  <span class="token key atrule">tasks</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checks if /data/db_troubleshoot exists</div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text">      <span class="token key atrule">stat</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">11</div><div class="code-styler-line-text">        <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">12</div><div class="code-styler-line-text">      <span class="token key atrule">register</span><span class="token punctuation">:</span> stat_db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">13</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">14</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">15</div><div class="code-styler-line-text">      <span class="token key atrule">file</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">16</div><div class="code-styler-line-text">        <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">17</div><div class="code-styler-line-text">        <span class="token key atrule">state</span><span class="token punctuation">:</span> directory</div></div><div class="code-styler-line"><div class="code-styler-line-number">18</div><div class="code-styler-line-text">        <span class="token key atrule">owner</span><span class="token punctuation">:</span> postgres</div></div><div class="code-styler-line"><div class="code-styler-line-number">19</div><div class="code-styler-line-text">        <span class="token key atrule">group</span><span class="token punctuation">:</span> postgres</div></div><div class="code-styler-line"><div class="code-styler-line-number">20</div><div class="code-styler-line-text">        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'0700'</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">21</div><div class="code-styler-line-text">        <span class="token key atrule">force</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">22</div><div class="code-styler-line-text">      <span class="token key atrule">when</span><span class="token punctuation">:</span> stat_db_troubleshoot.stat.exists == false</div></div><div class="code-styler-line"><div class="code-styler-line-number">23</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">24</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates the group pgsqladmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">25</div><div class="code-styler-line-text">      <span class="token key atrule">group</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">26</div><div class="code-styler-line-text">        <span class="token key atrule">name</span><span class="token punctuation">:</span> pgsqladmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">27</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">28</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Creates the user dbadmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">29</div><div class="code-styler-line-text">      <span class="token key atrule">user</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">30</div><div class="code-styler-line-text">        <span class="token key atrule">name</span><span class="token punctuation">:</span> dbadmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">31</div><div class="code-styler-line-text">        <span class="token key atrule">group</span><span class="token punctuation">:</span> pgsqladmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">32</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">33</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sets default ACL for /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">34</div><div class="code-styler-line-text">      <span class="token key atrule">acl</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">35</div><div class="code-styler-line-text">        <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">36</div><div class="code-styler-line-text">        <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">37</div><div class="code-styler-line-text">        <span class="token key atrule">etype</span><span class="token punctuation">:</span> group</div></div><div class="code-styler-line"><div class="code-styler-line-number">38</div><div class="code-styler-line-text">        <span class="token key atrule">entity</span><span class="token punctuation">:</span> pgsqladmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">39</div><div class="code-styler-line-text">        <span class="token key atrule">permissions</span><span class="token punctuation">:</span> rwx</div></div><div class="code-styler-line"><div class="code-styler-line-number">40</div><div class="code-styler-line-text">        <span class="token key atrule">state</span><span class="token punctuation">:</span> present</div></div><div class="code-styler-line"><div class="code-styler-line-number">41</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">42</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sets ACL for /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">43</div><div class="code-styler-line-text">      <span class="token key atrule">acl</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">44</div><div class="code-styler-line-text">        <span class="token key atrule">path</span><span class="token punctuation">:</span> /data/db_troubleshoot</div></div><div class="code-styler-line"><div class="code-styler-line-number">45</div><div class="code-styler-line-text">        <span class="token key atrule">etype</span><span class="token punctuation">:</span> group</div></div><div class="code-styler-line"><div class="code-styler-line-number">46</div><div class="code-styler-line-text">        <span class="token key atrule">entity</span><span class="token punctuation">:</span> pgsqladmin</div></div><div class="code-styler-line"><div class="code-styler-line-number">47</div><div class="code-styler-line-text">        <span class="token key atrule">permissions</span><span class="token punctuation">:</span> rwx</div></div><div class="code-styler-line"><div class="code-styler-line-number">48</div><div class="code-styler-line-text">        <span class="token key atrule">state</span><span class="token punctuation">:</span> present</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 9" class="heading" id="Task_9"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 9<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Download Role" class="heading" id="Download_Role"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Download Role<div class="heading-after">...</div></h3><div class="heading-children"><div><pre><code>$ ansible-galaxy role install geerlingguy.mysql
- downloading role 'mysql', owned by geerlingguy
- downloading role from https://github.com/geerlingguy/ansible-role-mysql/archive/4.3.3.tar.gz
- extracting geerlingguy.mysql to /home/ansible/exam-files/roles/geerlingguy.mysql
- geerlingguy.mysql (4.3.3) was installed successfully
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="" class="heading"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div><div class="heading-after">...</div></h3><div class="heading-children"><div class="code-styler-pre-parent"><pre class="language-bash code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div class="code-styler-header-language-tag">Bash</div><div class="code-styler-header-text"></div></div><code class="language-bash is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text">$ <span class="token function">tr</span> -dc A-Za-z0-9*_$^<span class="token operator">!</span> <span class="token operator">&lt;</span> /dev/urandom <span class="token operator">|</span> <span class="token function">head</span> -c <span class="token number">24</span> <span class="token operator">&gt;</span> .vault_passwd</div></div></code><button class="copy-code-button">Copy</button></pre></div><div class="code-styler-pre-parent"><pre class="language-ini code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/e2a56348-472d-48c0-ab6b-aa1cb4123fb8"></div><div class="code-styler-header-language-tag">Ini</div><div class="code-styler-header-text"></div></div><code class="language-ini is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">defaults</span><span class="token punctuation">]</span></span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token key attr-name">inventory</span> 		<span class="token punctuation">=</span> <span class="token value attr-value">./inventory</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><span class="token key attr-name">roles_path</span> 		<span class="token punctuation">=</span> <span class="token value attr-value">./roles</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text"><span class="token key attr-name">remote_user</span>		<span class="token punctuation">=</span> <span class="token value attr-value">ansible</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text"><span class="token key attr-name">private_key_file</span> 	<span class="token punctuation">=</span> <span class="token value attr-value">./id_rsa</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><span class="token key attr-name">host_key_checking</span> 	<span class="token punctuation">=</span> <span class="token value attr-value">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text"><span class="token key attr-name">nocows</span> 			<span class="token punctuation">=</span> <span class="token value attr-value">1</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text"><span class="token key attr-name">retry_files_enabled</span> 	<span class="token punctuation">=</span> <span class="token value attr-value">false</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">10</div><div class="code-styler-line-text"><span class="token key attr-name">vault_password_file</span>     <span class="token punctuation">=</span> <span class="token value attr-value">./.vault_passwd</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>vars/mysql.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token key atrule">mysql_root_username</span><span class="token punctuation">:</span> root</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text"><span class="token key atrule">mysql_root_password</span><span class="token punctuation">:</span> sqlrootpassword</div></div></code><button class="copy-code-button">Copy</button></pre></div><div><pre><code>$ ansible-vault encrypt vars/mysql.yml
Encryption successful
</code><button class="copy-code-button">Copy</button></pre></div><div><p>Change the line below in <code>roles/geerlingguy.mysql/defaults/main.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token key atrule">mysql_root_password_update</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div></code><button class="copy-code-button">Copy</button></pre></div><div><p><code>playbooks/deploy-mysql.yml</code></p></div><div class="code-styler-pre-parent"><pre class="language-yaml code-styler-pre" tabindex="0" defaultfold="false"><div class="code-styler-header-container"><div><img class="code-styler-icon" src="blob:app://obsidian.md/b4ff4ee0-ac34-4d20-8992-7e288d949b61"></div><div class="code-styler-header-language-tag">YAML</div><div class="code-styler-header-text"></div></div><code class="language-yaml is-loaded"><div class="code-styler-line"><div class="code-styler-line-number">1</div><div class="code-styler-line-text"><span class="token punctuation">---</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">2</div><div class="code-styler-line-text"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> mysql</div></div><div class="code-styler-line"><div class="code-styler-line-number">3</div><div class="code-styler-line-text">  <span class="token key atrule">become</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">4</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">5</div><div class="code-styler-line-text">  <span class="token key atrule">vars_files</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">6</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> /home/ansible/exam<span class="token punctuation">-</span>files/vars/mysql.yml</div></div><div class="code-styler-line"><div class="code-styler-line-number">7</div><div class="code-styler-line-text"><br></div></div><div class="code-styler-line"><div class="code-styler-line-number">8</div><div class="code-styler-line-text">  <span class="token key atrule">roles</span><span class="token punctuation">:</span></div></div><div class="code-styler-line"><div class="code-styler-line-number">9</div><div class="code-styler-line-text">    <span class="token punctuation">-</span> geerlingguy.mysql</div></div></code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Task 10" class="heading" id="Task_10"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Task 10<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="" class="heading"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div><div class="heading-after">...</div></h3><div class="heading-children"><div><pre><code>ansible-config list &gt; ansible.cfg.template

ansible-config dump &gt; ansible.cfg.dump

ansible-doc -l &gt; ansible-modules.txt
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Install jinja2 documentation" class="heading" id="Install_jinja2_documentation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Install jinja2 documentation<div class="heading-after">...</div></h3><div class="heading-children"><div><pre><code>dnf install -y python3-jinja2.noarch
</code><button class="copy-code-button">Copy</button></pre></div><div><p>Documentation files can be found with:</p></div><div><pre><code>rpm -ql python3-jinja2.noarch | grep index.html
/usr/share/doc/python3-jinja2/examples/rwbench/django/index.html
/usr/share/doc/python3-jinja2/examples/rwbench/genshi/index.html
/usr/share/doc/python3-jinja2/examples/rwbench/jinja/index.html
/usr/share/doc/python3-jinja2/examples/rwbench/mako/index.html
/usr/share/doc/python3-jinja2/ext/django2jinja/templates/index.html
/usr/share/doc/python3-jinja2/html/genindex.html
/usr/share/doc/python3-jinja2/html/index.html
/usr/share/doc/python3-jinja2/html/latexindex.html
/usr/share/doc/python3-jinja2/html/py-modindex.html
</code><button class="copy-code-button">Copy</button></pre></div><div class="mod-footer"></div></div></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Exam_Scenario_2_Answers"><span class="tree-item-title"><p>Exam Scenario 2 Answers</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_1"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Task 1</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Install_Ansible"><span class="tree-item-title"><p>Install Ansible</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_2"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Task 2</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Script:_get-server-info.sh"><span class="tree-item-title"><p>Script: get-server-info.sh</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Script:_task2.sh"><span class="tree-item-title"><p>Script: task2.sh</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_3"><span class="tree-item-title"><p>Task 3</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_4"><span class="tree-item-title"><p>Task 4</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_5"><span class="tree-item-title"><p>Task 5</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_6"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Task 6</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role:_start-page"><span class="tree-item-title"><p>Role: start-page</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role:_journald-persistent"><span class="tree-item-title"><p>Role: journald-persistent</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Playbook"><span class="tree-item-title"><p>Playbook</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_7"><span class="tree-item-title"><p>Task 7</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_8"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Task 8</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role:_postgresql"><span class="tree-item-title"><p>Role: postgresql</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Playbook"><span class="tree-item-title"><p>Playbook</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_9"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Task 9</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Download_Role"><span class="tree-item-title"><p>Download Role</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#"><span class="tree-item-title"></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Task_10"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Task 10</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#"><span class="tree-item-title"></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Install_jinja2_documentation"><span class="tree-item-title"><p>Install jinja2 documentation</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>